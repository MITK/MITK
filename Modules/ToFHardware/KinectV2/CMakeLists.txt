env_option(MITK_USE_TOF_KINECTV2 "Enable support for Kinect V2 camera" ON)

IF(MITK_USE_TOF_KINECTV2)

  IF(NOT KinectSDK2_FOUND)
    Message(FATAL_ERROR "Install Kinect SDK v2 for build woith option MITK_USE_TOF_KINECTV2")
  ENDIF()

  SET(MITK_TOF_AVAILABLE_CAMERAS ${MITK_TOF_AVAILABLE_CAMERAS},Microsoft Kinect V2)
  SET(INCLUDE_DIRS_INTERNAL ${INCLUDE_DIRS_INTERNAL} ${MITK_KINECTV2_INCLUDE_DIR})
  SET(ADDITIONAL_LIBS ${ADDITIONAL_LIBS} ${MITK_KINECTV2_LIB})
  SET(INCLUDE_DIRS_INTERNAL ${INCLUDE_DIRS_INTERNAL} ${KinectSDK2_INCLUDE_DIRS} )
  SET(ADDITIONAL_LIBS ${ADDITIONAL_LIBS} ${KinectSDK2_LIBRARIES} )

MITK_CREATE_MODULE(
  SUBPROJECTS MITK-ToF
  INCLUDE_DIRS ${MITK_BIN_DIR}
  INTERNAL_INCLUDE_DIRS ${INCLUDE_DIRS_INTERNAL}
  DEPENDS MitkToFHardware MitkOpenCVVideoSupport
  ADDITIONAL_LIBS ${ADDITIONAL_LIBS}
  AUTOLOAD_WITH MitkToFHardware
)
Message("Kinect V2 Module generated")
add_subdirectory(Testing)

ENDIF(MITK_USE_TOF_KINECTV2)
